# é…ç½®ä»£ç†æä¾›è€…ï¼Œå¡«å†™è‡ªå·±çš„è®¢é˜…é“¾æ¥ï¼Œåç§°å¿…é¡»å”¯ä¸€
proxy-providers:
  provider1:
    url: ""  # åœ¨æ­¤å¤„å¡«å†™ provider1 çš„è®¢é˜…é“¾æ¥
    type: http  # è®¢é˜…é“¾æ¥ä½¿ç”¨ HTTP/HTTPS
    interval: 86400  # æ¯24å°æ—¶ï¼ˆ86400ç§’ï¼‰è‡ªåŠ¨æ›´æ–°
    override:
      additional-prefix: "[provider1]"  # ä¸º provider1 çš„èŠ‚ç‚¹åç§°æ·»åŠ å‰ç¼€ï¼Œä¾¿äºåŒºåˆ†
    filter: "(?i)^(?!.*(?:æµé‡|å¥—é¤|å®˜ç½‘|ç¾¤ç»„)).+$"  # è¿‡æ»¤æ‰åŒ…å«ç‰¹å®šå…³é”®å­—çš„èŠ‚ç‚¹ï¼Œç¡®ä¿åŒ¹é…å®Œæ•´çš„èŠ‚ç‚¹åç§°

  provider2:
    url: ""  # åœ¨æ­¤å¤„å¡«å†™ provider2 çš„è®¢é˜…é“¾æ¥
    type: http  # è®¢é˜…é“¾æ¥ä½¿ç”¨ HTTP/HTTPS
    interval: 86400  # æ¯24å°æ—¶ï¼ˆ86400ç§’ï¼‰è‡ªåŠ¨æ›´æ–°
    override:
      additional-prefix: "[provider2]"  # ä¸º provider2 çš„èŠ‚ç‚¹åç§°æ·»åŠ å‰ç¼€ï¼Œä¾¿äºåŒºåˆ†
    filter: "(?i)^(?!.*(?:æµé‡|å¥—é¤|å®˜ç½‘|ç¾¤ç»„)).+$"  # è¿‡æ»¤æ‰åŒ…å«ç‰¹å®šå…³é”®å­—çš„èŠ‚ç‚¹ï¼Œç¡®ä¿åŒ¹é…å®Œæ•´çš„èŠ‚ç‚¹åç§°

# é…ç½®ç›´è¿èŠ‚ç‚¹
proxies:
  - name: "ç›´è¿"  # èŠ‚ç‚¹åç§°
    type: direct  # ç›´æ¥è¿æ¥ç±»å‹
    udp: true  # æ”¯æŒ UDP åè®®

# å…¶ä»– Clash é…ç½®
mixed-port: 7890  # è®¾ç½®æ··åˆä»£ç†ç«¯å£ï¼Œæ”¯æŒ HTTP å’Œ SOCKS ä»£ç†
allow-lan: true  # å…è®¸å±€åŸŸç½‘è®¾å¤‡è¿æ¥
bind-address: '*'  # ç»‘å®šæ‰€æœ‰ç½‘ç»œåœ°å€
mode: rule  # è¿è¡Œæ¨¡å¼ï¼Œä½¿ç”¨è§„åˆ™æ¨¡å¼
log-level: info  # æ—¥å¿—ç­‰çº§ä¸º infoï¼Œè®°å½•å¸¸è§„ä¿¡æ¯

# é…ç½®å¤–éƒ¨æ§åˆ¶å™¨
external-controller: '127.0.0.1:9090'  # å¤–éƒ¨æ§åˆ¶æ¥å£åœ°å€

# DNS é…ç½®
dns:
    enable: false  # ç¦ç”¨ Clash å†…ç½® DNS
    ipv6: false  # ç¦ç”¨ IPv6 æ”¯æŒ
    default-nameserver: [223.5.5.5, 119.29.29.29]  # è®¾ç½®é»˜è®¤çš„ DNS æœåŠ¡å™¨
    enhanced-mode: fake-ip  # ä½¿ç”¨ Fake-IP æ¨¡å¼è¿›è¡Œ DNS æŸ¥è¯¢
    fake-ip-range: 198.18.0.1/16  # Fake-IP çš„åœ°å€èŒƒå›´
    use-hosts: true  # ä½¿ç”¨ hosts æ–‡ä»¶æ¥è§£æåŸŸå
    nameserver: ['https://doh.pub/dns-query', 'https://dns.alidns.com/dns-query']  # è®¾ç½® DoH (DNS over HTTPS) æœåŠ¡å™¨
    fallback: ['https://doh.dns.sb/dns-query', 'https://dns.cloudflare.com/dns-query', 'https://dns.twnic.tw/dns-query', 'tls://8.8.4.4:853']  # è®¾ç½®å¤‡ç”¨çš„ DNS æŸ¥è¯¢åœ°å€
    fallback-filter: 
      geoip: true  # æ ¹æ®åœ°ç†ä½ç½®è¿‡æ»¤ DNS è¯·æ±‚
      ipcidr: [240.0.0.0/4, 0.0.0.0/32]  # æ’é™¤æŒ‡å®šçš„ IP åœ°å€èŒƒå›´


proxy-groups:

  - name: é»˜è®¤
    type: select
    proxies: [è‡ªåŠ¨é€‰æ‹©,ç›´è¿,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹]

  - name: Google
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Telegram
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Twitter
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: å“”å“©å“”å“©
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: å·´å“ˆå§†ç‰¹
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: YouTube
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: NETFLIX
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Spotify
    type: select
    proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Github
    type: select
    proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: å›½å†…
    type: select
    proxies:  [ç›´è¿,é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©]

  - name: æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,éŸ©å›½,æ–°åŠ å¡,ç¾å›½,åŠ æ‹¿å¤§,è‹±å›½,æ³•å›½,å¾·å›½,å…¶å®ƒåœ°åŒº,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  #åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
  - name: é¦™æ¸¯
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)æ¸¯|hk|hongkong|hong kong"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: å°æ¹¾
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)å°|tw|taiwan"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: æ—¥æœ¬
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)æ—¥|jp|japan"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: éŸ©å›½
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)éŸ©|kr|korea|korean|seoul"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: æ–°åŠ å¡
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)(æ–°|sg|singapore)"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: ç¾å›½
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)ç¾|us|unitedstates|united states"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: åŠ æ‹¿å¤§
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)åŠ |ca|canada|toronto|vancouver|montreal"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: è‹±å›½
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)è‹±|uk|unitedkingdom|united kingdom|london|manchester|birmingham"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: æ³•å›½
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)æ³•|fr|france|paris|marseille|lyon"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: å¾·å›½
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)å¾·|de|germany|berlin|frankfurt|munich"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•


  - name: å…¶å®ƒåœ°åŒº
    type: fallback
    include-all: true
    exclude-type: direct
    filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|éŸ©|kr|korea|korean|seoul|æ–°|sg|singapore|ç¾|us|unitedstatesåŠ |ca|canada|toronto|vancouver|montreal|è‹±|uk|unitedkingdom|united kingdom|london|manchester|birmingham|æ³•|fr|france|paris|marseille|lyon|å¾·|de|germany|berlin|frankfurt|munich)).*"
    url: "http://www.gstatic.com/generate_204"
    tolerance: 20
    health-check: 
      enable: true
      lazy: true  # ä»…åœ¨èŠ‚ç‚¹è¶…æ—¶æˆ–è¢«ä½¿ç”¨æ—¶æ‰æµ‹è¯•

  - name: å…¨éƒ¨èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    include-all: true
    exclude-type: direct
    tolerance: 10

rules:
  - RULE-SET,private_ip,ç›´è¿,no-resolve
  - RULE-SET,github_domain,Github
  - RULE-SET,twitter_domain,Twitter
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,google_domain,Google
  - RULE-SET,telegram_domain,Telegram
  - RULE-SET,netflix_domain,NETFLIX
  - RULE-SET,bilibili_domain,å“”å“©å“”å“©
  - RULE-SET,bahamut_domain,å·´å“ˆå§†ç‰¹
  - RULE-SET,spotify_domain,Spotify
  - RULE-SET,cn_domain,å›½å†…
  - RULE-SET,geolocation-!cn,æ¼ç½‘ä¹‹é±¼

#GEOIP è§„åˆ™
  - RULE-SET,google_ip,Google
  - RULE-SET,netflix_ip,NETFLIX
  - RULE-SET,telegram_ip,Telegram
  - RULE-SET,twitter_ip,Twitter
  - RULE-SET,cn_ip,å›½å†…
  - MATCH,æ¼ç½‘ä¹‹é±¼

rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}

rule-providers:
  private_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  cn_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
  biliintl_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/biliintl.mrs"
  ehentai_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ehentai.mrs"
  github_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
  twitter_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs"
  youtube_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
  google_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
  telegram_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
  netflix_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"
  bilibili_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"
  bahamut_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.mrs"
  spotify_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs"
  pixiv_domain:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pixiv.mrs"
  geolocation-!cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"

  private_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"
  cn_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"
  google_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"
  netflix_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"
  twitter_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs"
  telegram_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"
